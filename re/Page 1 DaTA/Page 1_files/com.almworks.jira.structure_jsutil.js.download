/* module-key = 'com.almworks.jira.structure:jsutil', location = 'js/structure/jsutil.js' */
function namespace(O,L,K){if(!O)return{};var e=true,I=L;if(L===false){e=false;I=K}L=I||window;O=O.split(".");K=0;for(I=O.length;K<I;K++){var Z=O[K];L=L[Z]||e&&(L[Z]={});if(!L)break}return L}window.namespace=namespace;
(function(O,L,K){try{var e=namespace("almworks.util"),I=namespace("almworks.$",false)||O.jQuery;if(I)e.$=I;var Z=function(){function z(q){try{var t=false;if(typeof q!=="object"||!(q.stack||q.message||arguments.callee))try{throw Error();}catch(C){t=true;q=C}var H=[],A,M,S,c=/^\s*[A-Za-z0-9\-_\$]+\(/;if(q.stack){A=q.stack.split("\n");M=0;for(S=A.length;M<S;M++)if(A[M].match(c))H.push(A[M]);else A[M].indexOf("(")===0&&H.push("anonymous"+A[M])}else if(O.opera&&q.message){A=q.message.split("\n");M=0;for(S=
A.length;M<S;M++)if(A[M].match(c)){var g=A[M];if(A[M+1]){g+=" at "+A[M+1];M++}H.push(g)}}else if(arguments.callee){t=false;A=/^function\s+([^(\s]+)\s*\(/;var i=arguments.callee.caller;for(S=[];i;){var p=A.exec(i.toString());H.push(p&&p[1]||"(anonymous)");c=false;for(M=S.length-1;M>=0;M--)if(i===S[M]){c=true;break}if(c){H.push("(caller cycle detected)");break}else{S.push(i);i=i.caller}}}H.length&&t&&H.shift();return H}catch(D){return[]}}function E(q,t){for(var C=""+d++,H="[",A=C.length;A<5;A++)H+=
" ";H+=C+"][";C=""+((new Date).getTime()-h);if(C.length>3)C=C.substring(0,C.length-3)+"."+C.substring(C.length-3);for(A=C.length;A<7;A++)H+=" ";H+=C+"] ";H+=b[q]+" "+t;if(arguments.length>2)H+=" "+e.toArray(arguments).slice(2).join(" ");return H}function m(q,t,C){try{if(!(q<=0))if(!(q===v&&!j)){n&&n(E.apply(K,arguments));if(q>=a&&typeof u==="function"){C=C||t;var H=z(C).join("\n");if(!H&&C&&C.stack)H=""+C.stack;var A=t;if(H)A+="\n\n"+H;u(A)}}}catch(M){}}function l(q){try{O.QUnit.ok(q<e.ERR,E.apply(K,
arguments))}catch(t){m.apply(this,arguments)}}function s(q,t,C){if(typeof q==="object"&&typeof t==="string"&&typeof q[t]==="function")return q[t]=s(q[t],C);var H=!!t,A=q.name;return function(){var M=y.length;y.push(A);var S="| "+e.times(M,"..");e.debug(S+A+"("+e.toArray(arguments).join(", ")+") {");var c=(new Date).getTime(),g=false;M=H&&e.getStackTrace();var i;try{i=q.apply(this,arguments);g=true;return i}catch(p){throw p;}finally{var D=(new Date).getTime();y.pop();i=S+"} = "+(g?i:" THROW null")+
" // "+A+" ("+(D-c)+"ms)";if(M)i+="\n"+M.join("\n");e.debug(i)}}}var r=false,j=true,v=1,a=3,b={};b[v]="DEBUG";b[2]="WARN ";b[a]="ERR  ";var d=1,h=(new Date).getTime(),n=function(){return function(){try{var q=O.console;q&&q.log&&q.log(arguments.length===1?arguments[0]:e.toArray(arguments).join(" "))}catch(t){n=null}}}(),u=null,x=0,f,k,o=false,y=[];return{assertionsEnabled:function(q){var t=r;if(typeof q==="boolean")r=q;return t},logDebug:function(q){j=q},isDebugging:function(){return j},assert:function(q,
t){if(!r)return this;if(typeof q==="function"?q.call(this):q)return this;e.error(t||"assertion failed",Error());return this},log:O.QUnit?l:m,debug:function(){return e.log.apply(this,e.prependArray(v,arguments))},warn:function(){return e.log.apply(this,e.prependArray(2,arguments))},error:function(){return e.log.apply(this,e.prependArray(a,arguments))},elementPath:function(q){if(!I)return"no jquery";var t="";q=I(q).parentsUntil("body").andSelf();for(var C=0,H=q.length;C<H;C++){if(t)t+=" ";t+=q[C].localName;
if(q[C].id)t+="#"+q[C].id}return t},setLogWindowErrors:function(q){if(q===K)q=a;if(x!==q)if(x=q){if(f===K)f=O.onerror||null;k=e.seq(function(t,C,H){if(!o){o=true;try{var A=x;if(typeof A==="function")A=A.call(this,t,C,H);A>0&&m(A,"JavaScript error: "+t+"\n@line "+H+" ("+C+")")}catch(M){M=null}finally{o=false}}},f);k.toString=function(){return"jsutil.errorhandler"};O.onerror=k}else{if(O.onerror===k)O.onerror=f;k=f=K}},setErrorSink:function(q){u=q},nn:function(q,t){e.assert(q,t);return q},getStackTrace:z,
fdebug:s,DEBUG:v,WARN:2,ERR:a}},aa=function(){function z(a){return!!a&&Object.prototype.toString.call(a)==="[object Array]"}function E(a,b,d,h){if(!b)return a;h=typeof h==="number"?Math.min(b.length,h):b.length;for(d=typeof d==="number"?Math.max(0,d):0;d<h;d++)a.push(b[d]);return a}function m(a,b){if(!a)return-1;var d=a.length;if(!d)return-1;for(var h=0;h<d;h++)if(b===a[h])return h;return-1}function l(a,b,d){if(a===b)return true;if(!a||!b)return false;if(typeof a.nodeType==="number"||typeof b.nodeType===
"number")return false;if(typeof a!=="object"||typeof b!=="object")return false;var h,n;if(d)for(h=d.length-1;h>=0;h--){var u=d[h];if(u.a1===a&&u.a2===b||u.a2===a&&u.a1===b)return true}else d=[];d.push({a1:a,a2:b});for(n in a)if(a.hasOwnProperty(n))if(!l(a[n],b[n],d))return false;for(n in b)if(b.hasOwnProperty(n)&&!a.hasOwnProperty(n))return false;return true}function s(a,b){this._maxCapacity=a||100;this._shrunkSize=Math.max(1,Math.min(typeof b==="number"?b:Math.ceil(this._maxCapacity/2),this._maxCapacity));
this._size=0;this._hash={};this._head={next:null}}function r(a,b,d){var h=typeof a==="object";if(h!==(typeof b==="object"))return false;if(!h)return d?d(a,b):a===b;if(!a||!b)return a===b;for(var n in a)if(a.hasOwnProperty(n)){if(!b.hasOwnProperty(n))return false;if(!r(a[n],b[n],d))return false}for(n in b)if(b.hasOwnProperty(n)&&!a.hasOwnProperty(n))return false;return true}function j(a){this.value=a;this.next=null}function v(){this.last=this.first=null;for(var a=0,b=arguments.length;a<b;a++)this.add(arguments[a])}
e.extend(s.prototype,{size:function(){return this._size},getValue:function(a){if(a===null||a===K)return null;a=this._hash[a];if(!a)return null;this._moveForward(a);return a.value},getValueNoLRU:function(a){if(a===null||a===K)return null;return(a=this._hash[a])&&a.value||null},forEach:function(a){for(var b=this._head.next;b;b=b.next)a.call(b.value,b.key,b.value)},putValue:function(a,b){if(a===null||a===K)return null;var d=this._hash[a],h=null;if(d){this._moveForward(d);h=d.value;d.value=b}else{d={key:a,
value:b,prev:this._head,next:this._head.next};if(d.next)d.next.prev=d;this._head.next=d;this._hash[a]=d;this._size++;this._expungeOld()}return h},removeValue:function(a){if(a===null||a===K)return null;var b=this._hash[a];if(!b)return null;if(b.prev.next=b.next)b.next.prev=b.prev;if(--this._size===0)this._hash={};else this._hash[a]=null;if(this.onEntryRemoved)this.onEntryRemoved(b.key,b.value);return b.value},removeMatching:function(a){if(!a||!this._head.next)return 0;for(var b=0,d=this._head.next;d;d=
d.next)if(a.call(d.value,d.key,d.value)){b++;this._hash[d.key]=null;if(d.prev.next=d.next)d.next.prev=d.prev;this.onEntryRemoved&&this.onEntryRemoved(d.key,d.value)}if(b>0){this._size=Math.max(0,this._size-b);if(this._size===0)this._hash={}}return b},clear:function(){var a=this._head.next;if(a){this._head.next=null;this._hash={};this._size=0;if(this.onEntryRemoved)for(;a;a=a.next)this.onEntryRemoved(a.key,a.value)}},_moveForward:function(a){if(a!==this._head.next){if(a.prev.next=a.next)a.next.prev=
a.prev;a.next=this._head.next;if(a.next)a.next.prev=a;a.prev=this._head;this._head.next=a}},_expungeOld:function(){if(!(this._size<=this._maxCapacity)){for(var a=this._head.next,b=this._shrunkSize,d={},h=0;h<b&&a;h++){d[a.key]=a;a=a.next}if(a){b=a.prev;for(var n=this.onEntryRemoved?[]:null;a;a=a.next)if(this.isExpungePossible(a.key,a.value))n&&n.push(a);else{h++;d[a.key]=a;b.next=a;a.prev=b;b=a}b.next=null;this._size=h;this._hash=d;if(n)for(h=n.length-1;h>=0;h--)this.onEntryRemoved(n[h].key,n[h].value)}}},
onEntryRemoved:null,isExpungePossible:function(){return true}});e.extendOwn(v.prototype,{isEmpty:function(){return!this.first},add:function(a){return this.addNode(new j(a))},get:function(a){if(typeof a!=="number")throw Error("invalid index: "+a+" ("+typeof a+")");if(a<0)throw Error("list index out of bounds: "+a+" (negative)");if(this.isEmpty())throw Error("list index out of bounds: "+a+" (list is empty)");for(var b=a,d=this.first;b>0;){d=d.next;if(!d)throw Error("list index out of bounds: "+a+" (last index is "+
(a-b)+")");b--}return d.value},addNode:function(a){if(this.isEmpty()){this.first=this.last=a;a=a.next}for(;a;){this.last=this.last.next=a;a=a.next}return this},addList:function(a){if(!a.isEmpty()){if(this.isEmpty())this.first=a.first;else this.last.next=a.first;this.last=a.last}return this},toArray:function(){for(var a=this.first,b=[];a;){b.push(a.value);a=a.next}return b},foldLeft:function(a,b){for(var d=this.first,h=b;d;){h=a(h,d.value);d=d.next}return h}});return{isArray:z,toArray:function(a){if(z(a))return a;
if(typeof a==="string")return a.split("");return a?Array.prototype.slice.call(a,0):[]},mapArray:function(a,b,d){if(!a||!b)return{};var h={},n=a.length,u=typeof d==="function";if(n)for(var x=0;x<n;x++){var f=a[x],k=b(f,a,x);if(typeof k!=="undefined")h[k]=u?d(f,a,x):f}return h},keysOf:function(a){var b=[];if(a)for(var d in a)a.hasOwnProperty(d)&&b.push(d);return b},numericKeys:function(a){var b=[];if(a)for(var d in a)a.hasOwnProperty(d)&&b.push(e.toInt(d));return b},flipSet:function(a,b,d){d=d||{};
var h,n;if(!a)return d;if(!b)b=e.returnTrue;for(h in a)if(a.hasOwnProperty(h)){n=a[h];var u=typeof n;if(u==="string"||u==="number"||u==="boolean")d[n]=b(h,d[n])}return d},addAll:E,prepSlice:function(a,b,d,h){return e.prependArray(a,e.toArray(b).slice(d,h))},prependArray:function(a,b){b=e.toArray(b);var d=[];e.isArray(a)?e.addAll(d,a):d.push(a);e.addAll(d,b);return d},indexOf:m,contains:function(a,b){return m(a,b)!==-1},find:function(a,b){if(!a)return-1;var d=a.length;if(!d)return-1;for(var h=0;h<
d;h++)if(b.call(a,a[h],h))return h;return-1},findKey:function(a,b){if(!a||!b)return null;for(var d in a)if(a.hasOwnProperty(d))if(b.call(a,a[d],d))return d;return null},keyOf:function(a,b){for(var d in a)if(a[d]===b)return d;return K},convertArray:function(a,b){var d=[];if(!a)return d;for(var h=0,n=a.length;h<n;h++)d.push(b(a[h]));return d},eachOwn:function(a,b,d){if(!a||!b)return d;for(var h in a)if(a.hasOwnProperty(h)){d=b.call(a,h,d);if(d===false)break}return d},eachValue:function(a,b,d,h){if(!a||
!b)return h;for(var n in a)if(a.hasOwnProperty(n)){var u=a[n];if(u||d){h=b.call(a,u,n,h);if(h===false)break}}return h},arrayEquals:function(a,b){if(!a)return!b;if(!b)return!a;if(a.length!==b.length)return false;for(var d=0,h=a.length;d<h;d++)if(a[d]!==b[d])return false;return true},deepEquals:l,unionShortArrays:function(){for(var a=arguments.length,b=[],d=0,h=0;h<a;h++){var n=arguments[h];if(n){var u=n.length;if(u)for(var x=0;x<u;x++){for(var f=n[x],k=false,o=0;o<d;o++)if(b[o]===f){k=true;break}if(!k){b.push(f);
d++}}}}return b},times:function(a,b){var d=typeof b,h;if(d==="undefined")return b;if(d==="string"){h="";for(d=0;d<a;d++)h+=b}else if(d==="function"){h=[];for(d=0;d<a;d++)h.push(b())}return h},compareNumbers:function(a,b){return a<b?-1:a===b?0:1},accessArray:function(a,b){return a[b]},binarySearch:function(a,b,d,h,n){for(d-=1;b<=d;){var u=Math.floor((b+d)/2),x=n(a,h(u));if(x<0)d=u-1;else if(x>0)b=u+1;else return u}return-b-1},isEmpty:function(a){if(!a)return true;var b=true,d;for(d in a)if(a.hasOwnProperty(d)){b=
false;break}return b},isEmptyOrFalsy:function(a){if(!a)return true;var b=true,d;for(d in a)if(a.hasOwnProperty(d)&&a[d]){b=false;break}return b},isOwn:function(a,b){return!a.hasOwnProperty||a.hasOwnProperty(b)},arrayInsert:function(a,b,d){var h=a&&a.length;if(!h)return[d];var n=[];if(b>0&&b<h)E(n,a,0,b);else b>=h&&E(n,a);n.push(d);if(b<=0)E(n,a);else b<h&&E(n,a,b,h);return n},arrayFilter:function(a,b){if(!a||!a.length)return a;for(var d=null,h=0,n=a.length;h<n;h++){var u=a[h];if(b(u,h,a))d&&d.push(u);
else d||(d=h>0?a.slice(0,h):[])}return d||a},LRUCache:s,isDeeplySame:function(a,b,d){try{return r(a,b,d)}catch(h){e.warn("caught while comparing isDeeplySame "+a+", "+b,h);return false}},collectMap:function(){var a={},b,d,h,n;b=0;for(d=arguments.length-1;b<d;b+=2){h=arguments[b];n=typeof h;if(n==="string"&&h||n==="number")a[h]=arguments[b+1]}return a},LinkedList:v}},ba=function(){return{safeCall:function(z,E){if(typeof z!=="function")return K;var m;try{m=z.apply(E,e.toArray(arguments).slice(2))}catch(l){e.warn(l)}return m},
safeApply:function(z,E,m){if(typeof z!=="function")return K;var l;try{l=z.apply(E,m||[])}catch(s){e.warn(s)}return l}}},ca=function(){function z(c,g){var i=e.toArray(arguments).slice(2);if(!i.length)return E(c,g);return function(){var p=e.addAll([],i);e.addAll(p,arguments);return g.apply(c||this,p)}}function E(c,g){return function(){return g.apply(c,arguments)}}function m(c){c=e.toArray(arguments);return function(g){return function(){for(var i=e.toArray(arguments),p=[],D,G,N=0,Q=0,w=c.length,B=i.length;N<
w;++N){D=c[N];G=i[Q];if(typeof D==="string"){p.push(G);Q+=1}else if(Q<B&&D.test.call(this,G,Q,i,N)){p.push(G);Q+=1}else p.push(typeof D.value==="function"?D.value.call(this):D.value)}return g.apply(this,p)}}}function l(){if(!(t||H>0)){t=true;try{for(;q.next;){var c=q.next;q.next=c.next;c.af&&c.af.recalculate()}}finally{t=false}}}function s(){var c=arguments.length;this.input=c>1?e.toArray(arguments).slice(0,c-1):[];this.f=c>1?arguments[c-1]:null;this.valueCache=c===1?arguments[0]:K;this.life=new e.Life;
this.observable=new e.Observable;this.weight=1;this.serial=++C;if(M){this.debugName="F"+this.serial;e.debug(this.debugName,"created with initial value =",r(this.valueCache))}c=0;for(var g=this.input[0];g;g=this.input[++c]){g.observable&&g.observable.addListener(this.life,this);if(g.weight)this.weight+=g.weight}this.recalculate();return this}function r(c){if(O.JSON)try{return O.JSON.stringify(c)}catch(g){return g&&g.message}else return String(c)}function j(c,g,i){this.view=this.cell=null;this.cellLifecycle=
new e.Lifecycle;this.viewLifecycle=new e.Lifecycle;this.updating=false;c&&this.setCell(c);g&&this.setView(g,i)}function v(c,g,i,p){e.addSuper(j,this)(c);this.className=g;this.inversed=!!p;i&&this.setView(i)}function a(c,g,i){e.addSuper(j,this)(c);this.updateFunction=typeof i==="function"?i:null;g&&this.setView(g)}function b(c,g,i){e.addSuper(a,this)(c,g,function(p){this.toggle(!!i!==!!p)})}function d(c,g,i,p,D){e.addSuper(a,this)(c,g,function(G){G=p.call(this,G);D&&!G?this.removeAttr(i):this.attr(i,
G)})}function h(c,g){e.addSuper(j,this)(c,g)}function n(c,g){e.addSuper(j,this)(c,g)}function u(c,g){e.addSuper(j,this)(c,g)}function x(c,g){e.addSuper(j,this)(c,g)}function f(c,g){e.addSuper(j,this)(c,g)}function k(c,g,i,p){this._sectionId=i;e.addSuper(j,this)(c,g,p)}function o(c,g){e.addSuper(j,this)(c,g)}function y(c,g){e.addSuper(j,this)(c,g)}var q={af:null,next:null},t=false,C=0,H=0,A={},M=false,S={name:"life",test:function(c){return c instanceof e.Life||c instanceof e.Lifecycle},value:function(){return this.life}};
e.extend(s.prototype,{value:function(){return this.valueCache},recalculate:function(){if(this.f){this.debugName&&e.debug(this.debugName+": recalculating");for(var c=[],g=0,i=this.input[0];i;i=this.input[++g]){this.debugName&&e.debug(this.debugName+": arg["+g+"] = "+i);c.push(i.value())}this.setValue(this.f.apply(this,c))}},setValue:function(c){this.isEqualValue(c,this.valueCache)||this.setValueForced(c);return this},applyUpdate:function(c){this.setValue(c.apply(this,e.toArray(arguments).slice(1)))},
setValueForced:function(c){var g=this.valueCache;this.valueCache=c;if(this.debugName){var i=g,p=c;if(typeof i==="object")i=r(i);if(typeof p==="object")p=r(p);e.debug(this.debugName+": value changed: "+i+" => "+p)}this.observable.fireEvent("valueChanged",c,g);l();return this},isEqualValue:function(c,g){return c===g||e.deepEquals(c,g)},forceUpdate:function(){this.debugName&&e.debug(this.debugName+": update forced");this.observable.fireEvent("valueChanged",this.value());l();return this},scheduleUpdate:function(){this.debugName&&
e.debug(this.debugName+": update scheduled");for(var c=this.weight||1E6,g=q;g.next;){var i=g.next;if(!i.af||i.af.weight>c)break;g=i}g.next={af:this,next:g.next}},valueChanged:function(){this.debugName&&e.debug(this.debugName+": got notification");this.scheduleUpdate()},setDelay:function(c){var g=this.scheduleUpdate;this.scheduleUpdate=e.delayed(c,function(){g.apply(this);l()});return this},pipe:m(S,{name:"immediateCall",test:function(c){return c===true||c===false},value:true},"listener")(function(c,
g,i){if(c!==this.life){if(c.life)c=c.life();c=c.sub();this.life.addDetach(e.withThis(c,c.detach))}var p=this;this.observable.addListener(c,"valueChanged",function(D,G){i.call(p,D,G)});g&&i.call(p,p.value());return this}),pipeChanges:m(S,"listener")(function(c,g){return this.pipe(c,false,g)}),pipeBottlenecked:function(c,g){function i(){var G=p.value();if(!p.isEqualValue(D,G)){g.call(p,G,D);D=G}}var p=this,D=K;this.observable.addListener(this.life,"valueChanged",e.bottlenecked(c,i,p));i();return this},
pipeDebounced:m(S,"options","f")(function(c,g,i){function p(){var V=J.value();if(w||!J.isEqualValue(R,V))i.call(J,V,R);R=V;B=null;if(Q>=0&&U==="debounce")if(Q===0)U="init";else F=setTimeout(function(){U="init";F=null},Q)}function D(V){var X=(new Date).getTime();B=setTimeout(function(){var Y=(new Date).getTime()-X;if(Y<V)B=setTimeout(D,V-Y);else p()},V)}if(!i||!g||typeof g.wait!=="number"){e.error("Cell.pipeDebounced: No",!i?"function":"wait","specified");return this}var G=g.wait,N=e.toIntSafe(g.waitInit,
-1),Q=e.toIntSafe(g.waitRebound,-1),w=!!g.fireAlways,B=null,F=null,J=this,R,P={},U="init";P.init=function(){U="debounce";N<0?p():D(N)};P.debounce=function(){if(B!==null){clearTimeout(B);B=null}if(F!==null){clearTimeout(F);F=null}D(G)};this.observable.addListener(this.life,"valueChanged",function(){P[U]()});g.immediateCall!==false&&p();return this}),pipeOnce:m(S,{name:"condition",test:function(c,g,i){return g===i.length-2},value:null},"f")(function(c,g,i){function p(G,N){if(!g||g.call(D,G,N)){c.detach();
i.call(D,G,N)}}if(c.life)c=c.life();c=c.sub();c!==this.life&&this.life.addDetach(e.withThis(c,c.detach));this.observable.addListener(c,"valueChanged",p);g&&p(this.value());var D=this;return this}),fieldInput:function(c,g){function i(){p.setValue(g?g(c):c.val())}var p=this;this.externalRecalculate=i;A[this.serial]=this;c.change(i).keyup(i).click(i);c.data("cellUpdate",e.seq(i,c.data("cellUpdate")));i();return this},checkboxInput:function(c){return this.fieldInput(c,e.isChecked)},radioInput:function(c,
g){function i(){D.setValue(c.find(p+":checked").val()||null)}var p='input[type="radio"][name="'+g+'"]',D=this;this.externalRecalculate=i;A[this.serial]=this;c.change(i).keyup(i).click(i);c.find(p).each(function(){var G=I(this);G.data("cellUpdate",e.seq(i,G.data("cellUpdate")))});i();return this},selectInput:function(c){var g=null;c.attr("multiple")||(g=function(i){if((i=i.val())&&typeof i.length==="number")i=i.length?i[0]:null;return i});return this.fieldInput(c,g)},dispose:function(){delete A[this.serial];
this.life.detach()},multiUpdate:function(c){H+=c?1:-1;H<=0&&l()},recalculateAllExternals:function(){if(!e.isEmpty(A)){s.prototype.multiUpdate(true);try{for(var c in A)if(A.hasOwnProperty(c)){var g=A[c];e.safeCall(g.externalRecalculate,g)}}finally{s.prototype.multiUpdate(false)}}},subCell:function(c,g){var i=new s(null),p=e.reentranceGuard(i);i.parent=this;var D=new e.Life,G=e.withThis(D,D.detach);this.life.addDetach(G);i.life.addDetach(G);this.pipe(D,p(function(N){i.setValue(c.call(i,N))},true));
i.pipe(D,false,p(function(N){var Q=i.parent.value();N=g.call(i,N,Q);N!==K&&i.parent.setValueForced(N)}));return i},fieldSubCell:function(c,g){if(!c)throw Error("Invalid field path. Check that it does not end with dot, or use nameOnly option.");var i=g&&g.onlyName,p,D,G=c.indexOf(".");if(i||G===-1||G===c.length-1)p=c;else{p=c.substring(0,G);D=c.substring(G+1)}var N=e.reentranceGuard(),Q=new e.Lifecycle;this.life.addDetach(e.withThis(Q,Q.dispose));var w=this.subCell(function(B){B=!B||typeof B!=="object"||
!B.hasOwnProperty(p)?K:B[p];if(B instanceof s){Q.cycle();B.pipe(Q,false,N(function(F){w.setValue(F)},this));B=B.value()}else Q.cycleEnd();return B},N(function(B,F){if(!F||typeof F!=="object")return K;var J=F[p];if(J instanceof s)J.setValue(B);else if(B===K)delete F[p];else F[p]=B;return F}));if(g&&g._intermediateCell)w.life.addDetach(e.withThis(this,this.dispose));else g=e.extend({},g||{},{_intermediateCell:true});if(M){w.debug(p+w.serial);e.debug("intermediate cell",w)}return D?w.fieldSubCell(D,
g):w},multipleFieldsSubCell:function(){function c(W){if(W.cell){W.cell.pipeChanges(function(){var T;if(T=this.reentranceGuard){a:{for(T=this.parent;T;T=T.parent)if(T.reentranceGuard){T=true;break a}T=false}T=!T}T&&G.setValue(g())});e.eachOwn(W,function(T){T!=="cell"&&c(W[T])})}}function g(){for(var W={},T=0,$=w.length;T<$;++T)W[B[T]]=w[T].value();return W}var i=typeof arguments[arguments.length-1]==="object",p=i&&arguments[arguments.length-1],D=p&&p.onlyName;i=Array.prototype.slice.call(arguments,
0,arguments.length-(i?1:0));var G=new e.Cell,N=new e.Cell(this.value());N.parent=this;this.pipe(G.life,false,e.reentranceGuard()(function(W,T){var $=this.isEqualValue(W,T);N[$?"setValueForced":"setValue"](W)},N));G.life.addDetach(e.withThis(N,N.dispose));var Q={cell:N},w=[],B=[],F,J,R,P,U,V,X,Y;R=0;for(U=i.length;R<U;++R){F=i[R];F=D?[F]:F.split(".");X=Q;P=0;for(V=F.length;P<V;++P){J=F[P];if(!J)throw Error('Invalid field path "'+i[R]+'"');if(!X[J]){Y=X.cell.fieldSubCell(J,p);G.life.addDetach(e.withThis(Y,
Y.dispose));X[J]={cell:Y}}X=X[J]}if(e.contains(B,J)){G.dispose();throw Error('Field path "'+i[R]+'" has same last part "'+J+'" as another field path');}B.push(J);w.push(Y)}c(Q);G.setValue(g());G.parents=w;return G},debug:function(c){if(c===K)c=true;this.debugName=c;return this},toString:function(){return"["+this.weight+"] F"+this.serial+(this.debugName?"("+this.debugName+")":"")+" = "+r(this.valueCache)}});e.extend(j.prototype,{setCell:function(c,g){this.cellLifecycle.cycle();if(this.cell=c){c.observable.addListener(this.cellLifecycle.life(),
this);this.sync(g)}},setView:function(c,g){this.viewLifecycle.cycle();if(this.view=c){this.subscribeToViewEvents(this.viewLifecycle.life());this.sync(g)}},sync:function(c){if(this.view&&this.cell&&!this.updating){this.updating=true;try{c?this.updateCell(this.getViewValue()):this.updateView(this.getCellValue())}finally{this.updating=false}}},valueChanged:function(){if(!(!this.view||this.updating)){this.updating=true;try{this.updateView(this.getCellValue())}finally{this.updating=false}}},subscribeToViewEvents:function(){},
isValidViewValue:function(){return true},viewChanged:function(){if(this.cell&&this.view){var c=this.getViewValue();if(c!==K)if(this.updating)e.assert(c===this.getCellValue());else{this.updating=true;try{this.updateCell(c)}finally{this.updating=false}}}},updateView:function(){},updateCell:function(c){this.cell&&this.cell.setValue(c)},getViewValue:function(){return K},getCellValue:function(){return this.cell&&this.cell.value()}});e.extend(v.prototype,j.prototype,{updateView:function(c){this.view&&this.view.toggleClass(this.className,
this.inversed!==!!c)}});e.extend(a.prototype,j.prototype,{updateView:function(c){this.view&&this.updateFunction&&this.updateFunction.call(this.view,c)}});e.extend(b.prototype,a.prototype);e.extend(d.prototype,a.prototype);e.extend(h.prototype,j.prototype,{updateView:function(c){if(this.view)c?this.view.attr("checked","checked"):this.view.removeAttr("checked")},getViewValue:function(){return this.view&&this.view.is(":checked")},subscribeToViewEvents:function(){if(this.view){var c=e.withThis(this,this.viewChanged);
this.view.change(c).keyup(c).click(c)}}});e.extend(n.prototype,j.prototype,{updateView:function(c){if(this.view)c?this.view.find('option[value="'+(""+c)+'"]').attr("selected","selected"):this.view.find("option:selected").removeAttr("selected")},getViewValue:function(){return this.view&&this.view.val()},isValidViewValue:function(c){if(!c||!this.view)return true;return this.view.find('option[value="'+c+'"]').length>0},subscribeToViewEvents:function(){if(this.view){var c=e.withThis(this,this.viewChanged);
this.view.change(c).keyup(c).click(c)}}});e.extend(u.prototype,j.prototype,{updateView:function(c){if(this.view)c===K||c===null?this.view.val(""):this.view.val(""+c)},getViewValue:function(){return this.view&&this.view.val()},isValidViewValue:function(c){return!c||!this.view||typeof c==="string"},subscribeToViewEvents:function(){this.view&&this.view.change(e.withThis(this,this.viewChanged))}});e.extend(x.prototype,j.prototype,{updateView:function(c){if(this.view)this.view.val(c||"")},getViewValue:function(){return this.view&&
this.view.val()},isValidViewValue:function(c){if(!c||!this.view)return true;return typeof c==="string"},subscribeToViewEvents:function(){if(this.view){var c=e.withThis(this,this.viewChanged);this.view.change(c).keyup(c).click(c)}}});e.extend(f.prototype,j.prototype,{getButtons:function(){if(!this.view)return I();var c=this.view.attr("name"),g=this.view.closest("form");if(!c||!g.length)return I();return g.find('input[type="radio"][name="'+c+'"]')},updateView:function(c){var g=this.getButtons();if(g&&
g.length)c?g.filter('[value="'+(""+c)+'"]').attr("checked","checked"):g.filter(":checked").removeAttr("checked")},isValidViewValue:function(c){if(!c)return true;var g=this.getButtons();if(!g||!g.length)return true;return g.filter('[value="'+c+'"]').length>0},getViewValue:function(){var c=this.getButtons();if(!c)return null;return c.filter(":checked").attr("value")},subscribeToViewEvents:function(){var c=this.view&&this.view.closest("form");if(c){var g=e.withThis(this,this.viewChanged);c.change(g).keyup(g).click(g)}}});
e.extend(k.prototype,j.prototype,{getButtons:function(){if(!this.view)return I();return this.view.find('div[data-section="'+this._sectionId+'"] a')},updateView:function(c){var g=this.getButtons();if(g&&g.length){g.removeClass("checked aui-dropdown2-checked active aui-dropdown2-active").attr("aria-checked","false");c&&g.filter('[data-value="'+c+'"]').addClass("checked aui-dropdown2-checked active aui-dropdown2-active").attr("aria-checked","true")}},isValidViewValue:function(c){if(!c)return true;var g=
this.getButtons();if(!g||!g.length)return true;return g.filter('[data-value="'+c+'"]').length>0},getViewValue:function(){var c=this.getButtons();if(!c)return null;return c.filter(".checked").attr("data-value")},subscribeToViewEvents:function(c){var g=this,i=function(p){(p=p&&p.target&&I(p.target))&&p.closest('div[data-section="'+g._sectionId+'"]').length&&g.viewChanged()};this.view.bind("aui-dropdown2-item-check",i);c.addDetach(e.curryThis(this.view,this.view.unbind,"aui-dropdown2-item-check",i))}});
e.extend(o.prototype,j.prototype,{updateView:function(c){this.view&&this.view.each(function(){var g=I(this),i=g.is("input:text,textarea")?"readonly":"disabled";c?g.removeAttr(i):g.attr(i,i);g.css("color",c?"inherit":"#888")})}});e.extend(y.prototype,j.prototype,{updateView:function(c){var g=this.view;if(g){g.css("color",c?"inherit":"#888");g=g.find(":input");c?g.removeAttr("disabled"):g.attr("disabled","disabled")}}});return{returnTrue:function(){return true},returnFalse:function(){return false},
returnThis:function(){return this},noop:function(){},returnConst:function(c){return function(){return c}},identity:function(c){return c},truthy:function(c){return!!c},compose:function(c,g){return function(){return g.call(this,c.apply(this,arguments))}},delayed:function(c,g,i){var p=null;return function(){var D=i||this,G=e.toArray(arguments);p&&clearTimeout(p);p=setTimeout(function(){p&&clearTimeout(p);p=null;g.apply(D,G)},c)}},bottlenecked:function(c,g,i){function p(N){D=null;G=N||(new Date).getTime();
g.call(i)}e.assert(typeof g==="function");var D=null,G=0;return function(){if(!D){var N=(new Date).getTime(),Q=N-G;if(Q>c)p(N);else D=setTimeout(p,c-Q)}}},curry:function(){return z.apply(this,e.prependArray(K,arguments))},curryThis:z,withThis:E,method:function(c,g){var i=c&&c[g];if(!c||!i)return e.noop;var p=e.toArray(arguments).slice(2);return e.curryThis.apply(this,[c,i].concat(p))},seq:function(){for(var c=[],g=0,i;typeof(i=arguments[g++])==="function";)c.push(i);return function(){for(var p,D=
0,G;G=c[D++];)p=G.apply(this,arguments);return p}},fand:function(){for(var c=[],g=0;g<arguments.length;g++){var i=arguments[g];typeof i==="function"&&c.push(i)}if(c.length===0)return e.returnTrue();if(c.length===1)return c[0];return function(){for(var p=e.toArray(arguments),D=0;D<c.length;D++)if(!c[D].apply(this,p))return false;return true}},and:function(){for(var c=true,g=0,i=arguments.length;g<i;g++){c=c&&arguments[g];if(!c)break}return c},or:function(){for(var c=false,g=0,i=arguments.length;g<
i;g++)if(c=c||arguments[g])break;return c},not:function(c){return!c},timeCache:function(c,g){var i,p=0,D=function(){var G=(new Date).getTime();if(G>p){i=g();p=G+c}return i};D.reset=function(){p=0};return D},mkTuple:function(){var c=e.toArray(arguments);return function(){for(var g=e.toArray(arguments),i={},p,D=0,G=c.length;D<G;++D){p=g[D];if(g.hasOwnProperty(D))i[c[D]]=p}return i}},parseParams:m,Cell:s,CellPresenter:j,setDebugCells:function(c){M=c},lazy:function(c){function g(){if(g._hasInstance)return g._instance;
if(i)throw Error("reentrant call to lazy("+c+")");i=true;try{var p=c.call(this);g._instance=p;g._hasInstance=true;return p}finally{i=false}}var i=false;return g},reentranceGuard:function(c){var g=0;return function(i,p){if(p===true)p=c;if(typeof p!=="object")p=null;var D,G;return function(){if(!(g>0)){g+=1;try{if(p){D="reentranceGuard"in p;G=p.reentranceGuard;p.reentranceGuard=true}return i.apply(c||this,arguments)}finally{g-=1;if(p)if(D)p.reentranceGuard=G;else delete p.reentranceGuard}}}}},args:function(){return e.toArray(arguments)},
ElementClassToggler:v,ElementUpdater:a,ElementToggler:b,ElementAttributeSetter:d,CheckboxPresenter:h,SelectPresenter:n,TextPresenter:x,RadioPresenter:f,AjsDropdown2RadioPresenter:k,HiddenPresenter:u,InputEnabler:o,InputBlockEnabler:y}},da=function(){return{extend:function(z){for(var E=1,m;m=arguments[E++];)for(var l in m)z[l]=m[l];return z},extendOwn:function(z){for(var E=1,m;m=arguments[E++];)for(var l in m)if(m.hasOwnProperty(l))z[l]=m[l];return z},pvc:function(){throw Error("pvc");},addSuper:function(z,
E){if(!E||!z)return e.returnTrue;var m=E._super||(E._super={}),l=z.prototype,s;for(s in l){var r=l[s];if(typeof r==="function")m[s]=e.withThis(E,r)}return function(){z.apply(E,e.toArray(arguments))}}}},ea=function(){return{defined:function(z){return typeof z!=="undefined"},toInt:function(z){if(typeof z==="number")return z;var E=parseInt(z,10);if(""+z===""+E)return E;throw Error("invalid value ("+z+")");},toIntSafe:function(z,E){if(z===K||z===null||z==="")return E||0;var m=parseInt(z,10);if(""+z===
""+m)return m;return E||0},asNumber:function(z,E){return typeof z==="number"?z:E},asString:function(z){return String(z)}}},fa=function(){function z(f){var k="";if(f){if(f.jQuery&&f.length)f=f[0];if(f.tagName)k+=f.tagName;if(f.id)k+="#"+f.id;if(f.className)k+="."+f.className}else k+=f;return k}function E(){h=null;for(var f=false,k=d;k;k=k.prev){var o=k.activeElement;if(o&&m(o)){try{b&&e.debug("refocus to "+z(o));f=l(o)}catch(y){e.debug(y)}break}}f||m(L.activeElement)||l(L.body);d.activeElement=null}
function m(f){if(!f)return false;if(f.jquery)f=f[0];if(f===O||f===L)return true;return I.contains(L.documentElement,f)&&I(f).is(":visible")}function l(f){if(!f)return false;if(f.jquery)f=f[0];if(!f)return false;var k=L.activeElement;if(f===k)return true;if(f===L.body){if(k){try{k.blur()}catch(o){}if(L.activeElement!==f)try{I(k).blur()}catch(y){}}if(L.activeElement!==f)try{I(f).focus()}catch(q){}}else{if(!m(f))return false;try{f.focus()}catch(t){}if(L.activeElement!==f)try{I(f).focus()}catch(C){}}return L.activeElement===
f}function s(){this.savedHandler=null;this.saved=false}function r(f,k){function o(y){function q(c,g){var i;switch(c){case "#":if(t&&t.hasOwnProperty("id"))throw Error("Element "+f+' must have one ID: "'+C+'"');(t=t||{}).id=g;break;case ".":i=t&&t["class"];(t=t||{})["class"]=(i?i+" ":"")+g;break;case " ":if(!S)throw Error(f+": unexpected space at index "+A.index+' in "'+C+'"');q(S,g);break;default:throw Error(f+": unsupported tag property "+A[1]+" at index "+A.index+' in "'+C+'"');}M=H.lastIndex;if(c!==
" ")S=c}if(!y.length)return{};if(typeof y[0]==="object")return y[0];var t=null;if(typeof y[0]==="string"){for(var C=y[0],H=/([.# ])([^.# ]+)/g,A,M,S;A=H.exec(C);)q(A[1],A[2]);if(M!==C.length)throw Error('Could not recognize tag property string "'+C+'"');}else if(typeof y[0]==="object")t=y[0];if(typeof y[1]==="object")t=e.extend(t||{},y[1]);return t}return function(){var y=o(e.toArray(arguments)),q="<"+f+e.eachOwn(y,function(C,H){var A=y[C];H+=" "+C;if(A){if(e.isArray(A))A=A.join(" ");A=A.toString().replace(u,
"&#x22;");H+='="'+A+'"'}return H},"")+">";k&&k.noEndTag||(q+="</"+f+">");var t=I(q);q=function(){e.eachValue(e.toArray(arguments),function(C){if(C instanceof I)t.append(C);else if(typeof C==="function")t.append(C());else if(C)throw Error("Unsupported content: expected jQuery, found "+typeof C+' "'+C+'"');});return t};return arguments.length&&!y?q.apply(K,arguments):q}}if(!I)return{};var j=null,v=null,a,b=false,d={activeElement:null,next:null,prev:null},h,n=I("<div></div>");e.extend(s.prototype,{disableSelection:function(){var f=
I("body")[0];if(f&&!this.saved){this.savedHandler=f.onselectstart;f.onselectstart=e.returnFalse;this.saved=true}},enableSelection:function(){var f=I("body")[0];if(f&&this.saved){f.onselectstart=this.savedHandler;this.savedHandler=K;this.saved=false}},isSelectionDisabled:function(){return this.saved}});var u=/"/g,x={div:r("div"),input:r("input",{noEndTag:true}),a:r("a")};return{onPage:function(f){f.closest||(f=I(f));return!!f.closest("body").length},isVisibleOnPage:m,setOuterWidth:function(f,k){var o=
f.outerWidth(true);if(o===k)return false;o-=f.width();f.width(Math.max(0,k-o));return true},getClasses:function(f){var k=f[0];if(!k)return[];k=k.className;if(typeof k!=="string")k=f.attr("class");if(!k||typeof k!=="string")return[];return k.split(/\s+/)},updateClasses:function(f,k,o){var y=f[0];if(y){var q=y.className,t=true;if(typeof q!=="string"){q=f.attr("class");t=false}q=(q||"").split(/\s+/);for(var C=false,H=0;H<o.length;H++){var A=o[H],M=e.indexOf(q,A)>=0;A=e.indexOf(k,A)>=0;if(M!==A){C=true;
break}}if(C){C=[];for(H=0;H<q.length;H++)(A=q[H])&&e.indexOf(o,A)<0&&C.push(A);for(H=0;H<o.length;H++){A=o[H];e.indexOf(k,A)>=0&&C.push(A)}k=C.join(" ");if(t)y.className=k;else f.attr("class",k)}}},quickDetach:function(f){if(f&&f.length)for(var k=f.length-1;k>=0;k--){var o=f[k];o.parentNode&&o.parentNode.removeChild(o)}},quickEmptyWithDetach:function(f){if(f&&f.length)for(var k=f.length-1;k>=0;k--)for(var o=f[k];o.firstChild;)o.removeChild(o.firstChild)},getClientWidth:function(f){if(!f||!f.length)return 0;
var k=f[0].clientWidth;if(k&&typeof k==="string")try{k=parseInt(k,10)}catch(o){k=0}if(!k||typeof k!=="number")k=f.width();return k},httpErrorReport:function(f,k){var o={};if(k==="timeout"){o.title="Request timed out. Please check your connection and try again.";o.details="HTTP request timeout"}else if(k==="connection"){o.title="Connection problem. Please check your connection and try again.";o.details="Browser failed to establish HTTP connection."}else if(f.status===403||f.status===401){o.title="Permissions problem. Please check that you are logged in.";
o.details="HTTP "+f.status+" "+f.statusText;if(f.responseText)o.details+="\n\n"+f.responseText}else if(f.status){o.title="Server-side error. Please contact JIRA administrator.";o.details="HTTP "+f.status+" "+f.statusText;if(f.responseText)o.details+="\n\n"+f.responseText}else{o.title="Network error. Please check your connection and try again.";o.details="Browser failed to send HTTP request ("+f.status+")"}return o},mouseMoveTracker:function(f){function k(y){var q=o.screenX,t=o.screenY;o.screenX=y.screenX;
o.screenY=y.screenY;if(o.screenX!=q||o.screenY!=t){q=o;if(y){if(j===null)j=!!(y.timeStamp&&Math.abs(y.timeStamp-(new Date).getTime())<1E3);y=j&&y.timeStamp||(new Date).getTime()}else y=(new Date).getTime();q.timeStamp=y}}var o={timeStamp:0,screenX:0,screenY:0};I(L).mousemove(k);f&&f.addDetach(function(){I(L).unbind("mousemove",k)});return o},borrowFocus:function(f,k){if(f&&f.jquery)f=f[0];if(k&&k.jquery)k=k[0];if(!m(f))return{returnFocus:e.returnFalse};d.activeElement=v||L.activeElement;b&&e.debug("borrowed focus from "+
z(d.activeElement));var o={activeElement:null,next:null,prev:d,scope:k||f};e.assert(!!o.scope);d=d.next=o;l(f);return{returnFocus:function(y){if(!o)return null;if(o===d&&!y){y=v||L.activeElement;if(y===L.documentElement||y===L.body||y===O||!m(y)||y===o.scope||I.contains(o.scope,y)){h&&O.clearTimeout(h);h=O.setTimeout(E,250)}}if(o.prev.next=o.next)o.next.prev=o.prev;else{e.assert(d===o);d=o.prev}return o=null}}},trackFocus:function(){I(L).on("focus blur","body",function(f){var k=L.body,o=f.type===
"focus"||f.type==="focusin"?f.target:k;f=I(o);b&&e.debug("Event: focused = "+z(o));a&&O.clearTimeout(a);if(!f.is(".no-track-focus"))if(o===k||!f.is(":input,div[tabindex]"))a=O.setTimeout(function(){a=null;v=o;b&&e.debug("trulyFocused = "+z(o))},2E3);else{b&&e.debug("trulyFocused = "+z(o));v=o;a=null}})},setDebugFocus:function(f){b=f},focus:l,debugElem:z,htmlUnescape:function(f){if(!f)return f;f=n.html(f).text();n.empty();return f},dragBind:function(f,k,o,y,q){var t=new e.Life;if(q){q=e.withThis(t,
t.detach);o=o?e.seq(o,q):q;y=y?e.seq(y,q):q}if(f.browser.msie){f=f(L);t.bind(f,"mousemove",k);t.bind(f,"mouseleave",y);t.bind(f,"mouseup",o)}else{y=f(O);t.bind(y,"mousemove",k);t.bind(y,"mouseup",o);f.browser.webkit&&t.bind(f("body"),"mousemove",k)}return t},SelectionDisabler:s,showHide:function(f,k){if(!f)return f;k?f.show():f.hide();return f},hoverToClass:function(f,k){var o=k||f;f.hover(function(){o.addClass("hover")},function(){o.removeClass("hover")})},selectText:function(f,k,o){if(f=f[0]||f)if(f.setSelectionRange){f.focus();
f.setSelectionRange(k,o)}else if(this.createTextRange){f=f.createTextRange();f.collapse(true);f.moveEnd("character",o);f.moveStart("character",k);f.select()}},getSelectedText:function(){var f=typeof O.getSelection==="function"&&O.getSelection();f||(f=L.selection&&L.selection.createRange().text);f||(f=typeof L.getSelection==="function"&&L.getSelection());if(!f)return"";if(typeof f!=="string")f=f.toString();return f},updateAttr:function(f,k,o){if(f&&k)if(f.attr(k)!=o)o?f.attr(k,o):f.removeAttr(k)},
isChecked:function(f){return f&&f.is(":checked")},addRemoveClass:function(f,k,o){if(f&&k)o?f.addClass(k):f.removeClass(k)},fixJQueryUISortableByAdjustingBodyOverflow:function(){var f=I("body"),k=f.css("overflow-y")||f.css("overflow");k&&k!=="visible"&&f.css("overflow-y","visible")},generateDom:function(){function f(t){if(t instanceof I)return t;else if(typeof t==="function")return t();else if(e.isArray(t))return e.eachValue(t,function(C,H,A){return A.add(f(C))},false,I([]));else{e.warn("Unexpected retval",
t,Object.prototype.toString.call(t));return I([])}}if(!arguments.length)return I([]);var k=[],o,y,q;y=0;for(q=arguments.length-1;y<q;++y){o=x[arguments[y]];if(!o)throw Error('Unsupported element "'+arguments[y]+'"');k.push(o)}k=arguments[arguments.length-1].apply(K,k);return f(k)}}},ga=function(){function z(l){this.points=l;this.factor=1/l;this.next=0;this.filled=false;this.data={};this.average=0}function E(l){var s=this;this.timeout=null;this.f=function(){s.timeout=null;l()}}var m=null;e.extend(z.prototype,
{add:function(l){l*=this.factor;var s=this.next,r=this.data[s];this.data[s]=l;this.average+=r?l-r:l;if(s===this.points){this.next=0;this.filled=true}else this.next=s+1;return this.filled?this.average:null},getAverage:function(){return this.filled?this.average:null}});e.extend(E.prototype,{arm:function(l){this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(this.f,l)},clear:function(){this.timeout&&clearTimeout(this.timeout);this.timeout=null}});return{requireGlobal:function(l){var s=O[l];
if(!s)throw Error("cannot proceed without "+l);return s},isMac:function(){if(m===null){var l=O.navigator&&O.navigator.userAgent;m=l&&/mac os/i.test(l)}return m},setUrlParameter:function(l,s,r){if(typeof l!=="string"){e.assert(false,l);return l}var j=r!==null&&r!==K,v=l.indexOf("?"),a=v<0?[]:l.substring(v+1).split("&");l=v<0?l:l.substring(0,v);var b=v=false;s+="=";for(var d=0;d<a.length;d++){var h=a[d];if(h)if(h.indexOf(s)===0){if(!v){v=true;if(j){l+=b?"&":"?";b=true;l+=s+encodeURIComponent(r)}}}else{l+=
b?"&":"?";b=true;l+=h}}if(!v&&j){l+=b?"&":"?";l+=s+encodeURIComponent(r)}return l},buildUrlParameters:function(l){var s="";e.eachValue(l,function(r,j){s+=s?"&":"?";s+=encodeURIComponent(j)+"="+encodeURIComponent(""+r)});return s},MovingAverage:z,Timer:E,minmax:function(l,s,r){return r<l?l:r>s?s:r},getTimezoneOffset:function(){return(new Date).getTimezoneOffset()*6E4},clone:function(l){return e.extend({},l)}}},ha=function(){function z(m,l,s){var r=m&&e.getCookie(m)||"";this.name=m;this.cookieValue=
r;this.values=this.decodeValue(r);this.expiration=l||365;this.path=s||"/"}var E={setCookie:function(m,l,s,r){if(r)e.endsWith(r,"/")||(r+="/");else r="/";if(l){var j=new Date;j.setTime(j.getTime()+(s===K?365:s)*864E5);s=l;if(l.indexOf(";")>=0||l.indexOf("=")>=0)s=encodeURIComponent(l);L.cookie=m+"="+s+";expires="+j.toGMTString()+";path="+r}else L.cookie=m+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path="+r},getCookie:function(m){var l=L.cookie;if(!l||l.length<=0)return"";m+="=";var s=m.length;l=l.split(/;\s*/);
var r,j,v,a=null;r=0;for(j=l.length;r<j;r++){v=l[r];if(v.length>=s&&v.substring(0,s)===m){a=v.substring(s);break}}if(!a)return"";if(a.substring(0,1)==='"'&&a.substring(a.length-1,a.length)==='"')a=a.substring(1,a.length-1);return decodeURIComponent(a)}};z.prototype={SEPARATOR:"|",ESCAPE:"\\",ESCAPE_REGEXP:/([\\\|])/g,decodeValue:function(m){if(!m)return[];for(var l=[],s="",r=m.length,j=false,v=this.ESCAPE,a=this.SEPARATOR,b=0;b<r;b++){var d=m.substring(b,b+1);if(j){s+=d;j=false}else if(d===v)j=true;
else if(d===a){s.length&&l.push(s);s=""}else s+=d}s.length&&l.push(s);return l},encodeValue:function(m){var l="";if(m&&m.length)for(var s=this.SEPARATOR,r=this.ESCAPE,j=this.ESCAPE_REGEXP,v=0,a=m.length;v<a;v++){var b=m[v]||"";if(b){if(l)l+=s;l+=b.replace(j,r+"$1")}}return l},updateCookie:function(){if(this.name){var m=this.encodeValue(this.values);if(m!==this.cookieValue){this.cookieValue=m;e.setCookie(this.name,m,this.expiration,this.path)}}},getSingleValue:function(m){if(!m)return"";var l=this.values;
if(!l)return"";m+="=";for(var s=0,r=l.length;s<r;s++){var j=l[s];if(e.startsWith(j,m))return j.substring(m.length)}return""},replaceValue:function(m,l){if(m){var s=this.values,r=this.values.length,j=false;m+="=";for(var v=0;v<r;v++)if(e.startsWith(s[v],m))if(j){s.splice(v,1);v--;r--}else{s[v]=m+l;j=true}j||s.push(m+l);this.updateCookie()}},makeTopmost:function(m){if(m){var l=this.values;if(m!==l[0]){for(var s=[m],r=0,j=l.length;r<j;r++){var v=l[r];v!==m&&s.push(v)}this.values=s;this.updateCookie()}}}};
return{defaultCookies:E,getCookie:E.getCookie,setCookie:E.setCookie,ConglomerateCookie:z}},ia=function(){function z(j){return j==="<"?"&lt;":j===">"?"&gt;":j==='"'?"&quot;":j==="'"?"&#39;":j==="&"?"&amp;":j}function E(j,v){if(!r)return null;for(var a=0,b=r.length;a<b;a++){var d,h=j;d=v;for(var n=0,u=h.length,x=r[a],f=void 0,k=void 0;x&&n<u;){f=h.indexOf(".",n);k=f<0?h.substring(n):h.substring(n,f);if(!k||!x.hasOwnProperty(k))break;x=x[k];n=f<0?u:f+1}h=null;if(n===u&&x!==K&&x!==null){n=typeof x;if(n===
"string")h=x;else if(n==="number")h=""+x;else e.warn("trying to use "+n+" in template: "+x)}if(h&&!d)h=e.htmlEscape(h);d=h;if(d!==null)return d}return null}function m(j,v,a,b,d,h,n,u,x){if(!v)return j;b=null;if(r&&!d)b=E(v,a);if(b!==null)return b;if(d){a=[v];a.push(E(d,false)||"?");if(n)a.push(E(n,false)||"?");if(x)a.push(E(x,false)||"?");d=e.text.apply(e,a);if(d!==v)b=d}else{d=e.text(v);if(d!==v)b=a?d:e.htmlEscape(d)}return b===null?j:b}var l=/[<>'"&]/g,s=/\{([a-z\d\._\-]+)(:html)?(,([a-z\d\._\-]+))?(,([a-z\d\._\-]+))?(,([a-z\d\._\-]+))?\}/ig,
r=null;return{head:function(j,v){var a=v.length;return j&&v&&j.length>=a&&j.substring(j.length-a)===v?j.substring(0,j.length-a):null},tail:function(j,v){var a=v.length;return j&&v&&j.length>=a&&j.substring(0,a)===v?j.substring(a):null},startsWith:function(j,v){if(!v)return false;var a=v.length;return j&&j.length>=a&&j.substring(0,a)===v},endsWith:function(j,v){var a=v.length;return j&&v&&j.length>=a&&j.substring(j.length-a)===v},abbreviateLabel:function(j){if(!j)return j;if(j.length<=40)return j;
return j.substring(0,37)+"..."},htmlEscape:function(j){if(!j||typeof j!=="string")return j;return j.replace(l,z)},renderTemplate:function(j){if(!j)return"";r=arguments.length<=1?null:e.addAll([],arguments,1);try{return j.replace(s,m)}finally{r=null}},capitalize:function(j){return j.length>1?j.substring(0,1).toUpperCase()+j.substring(1):j.toUpperCase()}}},ja=function(){return{Life:function(){function z(){this.detaches=[];this.live=true}function E(m,l,s){if(this.live){m.bind(l,s);this.addDetach(function(){m.unbind(l,
s)})}return this}z.prototype={addDetach:function(m){e.assert(typeof m==="function");if(!this.live){e.safeCall(m);return this}this.detaches.push(m);return this},detach:function(){if(!this.live)return this;this.live=false;for(var m=this.detaches.splice(0,this.detaches.length),l=0;l<m.length;l++)e.safeCall(m[l]);return this},isLive:function(){return this.live},bind:I&&E,sub:function(){var m=new e.Life;this.addDetach(e.withThis(m,m.detach));return m}};return z}(),Lifecycle:function(){function z(E){this.currentLife=
new e.Life;E!==K&&!E&&this.currentLife.detach();this.disposed=false}z.prototype={life:function(){return this.currentLife},cycleStart:function(){if(this.disposed||this.currentLife.isLive())return this;this.currentLife=new e.Life;return this},cycleEnd:function(){if(this.disposed||!this.currentLife.isLive())return this;this.currentLife.detach();return this},cycle:function(){this.cycleEnd();this.cycleStart();return this},dispose:function(){this.cycleEnd();this.disposed=true;return this},isStarted:function(){return!this.disposed&&
this.currentLife.isLive()}};return z}(),Observable:function(){function z(a){this.children=[];(this.parent=a)&&a.children&&a.children.push(this);this.tail=this.head={listener:null,next:null,live:true};this.fireLock=0;this.afterDispatch=null;this.postedEvents={};this.childrenPermutator=this.postTimeout=null}function E(){if(!(this.fireLock>0))for(;this.afterDispatch;){var a=this.afterDispatch;this.afterDispatch=null;for(var b in a)a.hasOwnProperty(b)&&e.safeCall(a[b])}}function m(a){for(var b=e.addAll([],
arguments,1),d=this.head.next,h;d;){h=d.next;if(d.listener&&d.live&&typeof d.listener[a]==="function")try{d.listener[a].apply(d.listener,b)}catch(n){e.error("exception when calling "+a+" on "+d.listener+": "+n,n)}d=h}}function l(a,b){var d=this.children;if(d&&d.length)for(var h=this.childrenPermutator?this.childrenPermutator(d):null,n=0,u=d.length;n<u;n++){var x=h?h(n,u):n;l.call(d[x],a,b)}e.safeApply(a,this,b)}function s(a,b){l.call(this,a,b);for(var d=this.parent;d;){e.safeApply(a,d,b);d=d.parent}}
function r(a){this.fireLock+=a}function j(a){e.assert(typeof a==="string");s.call(this,r,[+1]);try{s.call(this,m,arguments)}finally{s.call(this,r,[-1]);s.call(this,E,[])}}function v(){try{var a,b,d;do{a=false;var h=this.postedEvents;this.postedEvents={};for(var n in h)if(h.hasOwnProperty(n)){var u=h[n];b=0;for(d=u.length;b<d;b++){a=true;j.apply(this,u[b])}}}while(a)}finally{this.postTimeout=null}}z.prototype={addListener:function(a,b,d){a||(a=new e.Life);e.assert(a instanceof e.Life||a instanceof
e.Lifecycle);if(b){var h;if(typeof b==="string"&&typeof d==="function"){h={};h[b]=d}else if(typeof b==="object"&&typeof d==="undefined")h=b;else{e.error("unexpected use of method "+b+" "+d);return}e.assert(typeof h==="object");e.assert(this.tail.next===null);if(a instanceof e.Lifecycle)a=a.life();if(a.isLive()){var n=this;a.addDetach(function(){n.removeListener(h)});a={listener:h,next:null,live:true};this.tail=this.tail.next=a}}},removeListener:function(a){for(var b=typeof a==="function"?a:function(u){return u===
a},d=this.head.next,h,n=this.head;d;){h=d.next;if(b(d.listener)){d.live=false;d.listener=null;n.next=h}else n=d;d=h}this.tail=n},fireAfterDispatch:function(a,b){if(!a||typeof b!=="function")e.assert(false,a+" "+b);else if(this.fireLock<=0)try{b()}catch(d){e.error("exception when calling after dispatch ("+a+") "+b+": "+d,d)}else{if(!this.afterDispatch)this.afterDispatch={};this.afterDispatch[a]=b}},fireEvent:j,fireEventF:function(){return e.curryThis.apply(K,e.addAll([this,j],arguments))},postEvent:function(a){e.assert(typeof a===
"string");var b=this.postedEvents[a];b||(this.postedEvents[a]=b=[]);for(var d=e.toArray(arguments),h=0,n=b.length;h<n;h++){var u;a:{u=d;var x=b[h];if(u.length!==x.length)u=false;else{for(var f=0,k=u.length;f<k;f++){var o=u[f],y=x[f];if(o!=y&&!(o&&typeof o.length==="number"&&e.arrayEquals(o,y))){u=false;break a}}u=true}}if(u)break}h===n&&b.push(d);if(!this.postTimeout)this.postTimeout=setTimeout(e.withThis(this,v),0)}};return z}()}},ka=function(){function z(b){var d=0;if(b.shiftKey)d+=r.modifier.shift;
if(b.ctrlKey)d+=r.modifier.ctrl;if(b.altKey)d+=r.modifier.alt;if(b.originalEvent&&b.originalEvent.metaKey)d+=r.modifier.meta;return d}function E(b){return b?b.keyCode+z(b):0}function m(b){e.assert(typeof b==="string",b);b=b.split(/\s+/);if(b.length!=1)throw Error("multiple components not supported");b=b[0].split(/\+/);for(var d=0,h=0;h<b.length;h++){var n=h<b.length-1?"modifier":"key",u=r[n][b[h].toLowerCase()];if(!u)throw Error("unknown "+n+" "+b[h]);d+=u}return d}function l(b){function d(w,B){if(w.is(".kbd-pass"))return true;
if(w.is("input,textarea,select,button"))return false;if(!b)return true;if(!b.is(":visible"))return false;var F=w[0],J=b[0],R=w.is("html,body")||F===L;if(!R&&(J===F||I.contains(J,F)))return true;if(g){var P=g.accept(B,F);if(typeof P==="boolean")return P}if(!H)return false;if(!(R||I.contains(F,J)))return false;return typeof H==="function"?H(B,w,b):true}function h(w){if(v&&w.type==="keyup"){var B=E(w);if(j[B]&&G!==B){n(w);G=0;return false}}B=false;if(w){if(w.keyCode===M)B=true;else M=-1;if(c&&w.type===
c&&E(w)===S){e.error(w.type+" "+w.keyCode+" "+E(w));B=true;S=-1;c=null}}if(B){w.preventDefault();w.stopImmediatePropagation();return false}return true}function n(w){var B=N,F=w.timeStamp===D,J=E(w),R=J===G;N=w.currentTarget!==L;D=w.timeStamp;G=J;if(!(F&&R&&B&&!N))if(A){if(w.target)if(!d(I(w.target),w))return;if(J===0)e.warn("unrecognized event "+w);else{B=(new Date).getTime();if(B>t)q=y;var P=q.shortcuts[J];F=q.subs[J];if(q.passes[J]){e.assert(F);f(B,F)}else{if(F&&!u(w))F=null;if(Q&&(P||F)){O.clearTimeout(Q);
Q=null}if(P&&F){var U=new I.Event(w,{preventDefault:e.returnTrue,stopPropagation:e.returnTrue,stopImmediatePropagation:e.returnTrue});Q=O.setTimeout(function(){e.safeCall(P,K,U);q=y;t=0;Q=null},C);x(w);f(B,F)}else if(P){if(e.safeCall(P,K,w)===false||w.consumed||q!==y)x(w);q=y;t=0}else if(F){x(w);f(B,F)}else{q=y;t=0}}}}}function u(w){return(w=w.currentTarget)&&(w===L||w===(b&&b[0]))}function x(w){M=w.keyCode;w.stopImmediatePropagation();w.preventDefault()}function f(w,B){q=B;t=w+C}function k(w,B,F){var J=
y,R=w,P,U;for(P=R.indexOf(",");P>=0;P=R.indexOf(",")){U=I.trim(R.substring(0,P));R=R.substring(P+1);P=o(w,U);if(!P||B(J,P,w)===false)return;J=J.subs[P]||(J.subs[P]={shortcuts:{},subs:{},passes:{}})}(P=o(w,R))&&F(J,P,w)}function o(w,B){try{return m(B)}catch(F){e.error("cannot parse shortcut "+w+" ["+B+"]",F);return null}}if(!I)throw Error("no jQuery");var y={shortcuts:{},subs:{},passes:{}},q=y,t=0,C=500,H=true,A=true,M=-1,S=-1,c=null,g=null,i=new e.Life;if(b&&!b.length)b=null;var p={keydown:n,keyup:h,
keypress:h};I(L).bind(p);b&&b.bind(p);var D=0,G=0,N=false,Q=null;this.dispose=function(){i.detach();I(L).unbind("keydown",n).unbind("keyup",h).bind("keypress",h);b&&b.unbind("keydown",n).unbind("keyup",h).bind("keypress",h);q=y={}};this.addShortcut=function(w,B){e.assert(typeof B==="function",B);k(w,function(F,J,R){if(F.passes[J]){e.warn("shortcut "+R+" is overridden by PASS");return false}},function(F,J,R){if(F.passes[J])e.warn("shortcut "+R+" is overridden by PASS");else{F.shortcuts[J]&&F.shortcuts[J]!==
B&&e.warn("shortcut "+R+" already taken by "+F.shortcuts[J]);F.shortcuts[J]=B}});return this};this.addShortcutPass=function(w){k(w,function(B,F,J){B.passes[F]=true;if(B.shortcuts[F]){e.warn("PASS for "+J+" overrides "+B.shortcuts[F]);B.shortcuts[F]=null}},function(B,F,J){if(B.shortcuts[F]){e.warn("PASS for "+J+" overrides "+B.shortcuts[F]);B.shortcuts[F]=null}B.subs[F]&&e.warn("PASS for "+J+" overrides subcontexts");B.passes[F]=true;B.subs[F]={shortcuts:{},subs:{},passes:{}}});return this};this.setDominate=
function(w){H=w;return this};this.setEnabled=function(w){A=!!w};this.blockOnce=function(w,B){c=w;S=typeof B==="number"?B:m(B)};this.setCustomController=function(w){if(w){g&&e.warn("custom keyboard controller expunged");g=w}}}var s=!!(I&&I.browser.msie),r={modifier:{shift:1E3,ctrl:1E4,alt:1E5,meta:1E6},key:{esc:27,escape:27,tab:9,"return":13,enter:13,space:32,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,
pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_star:106,star:106,num_plus:107,plus:107,num_minus:109,minus:109,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130,";":186,"=":187,"=plus":61,comma:188,"-":I&&I.browser.mozilla&&parseInt(I.browser.version,
10)>=15?173:189,".":190,"/":191,"?":191,"`":192,"[":219,"\\":220,"]":221,"'":222,"0":48,"1":49,"2":50,"3":51,"4":52,"5":53,"6":54,"7":55,"8":56,"9":57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,shift:16,ctrl:17,alt:18,meta:91,lmeta:91,rmeta:93,clear:12}};r.key.shift+=r.modifier.shift;
r.key.ctrl+=r.modifier.ctrl;r.key.alt+=r.modifier.alt;r.key.meta+=r.modifier.meta;r.key.lmeta+=r.modifier.meta;r.key.rmeta+=r.modifier.meta;var j={110037:true,110039:true},v=s?j:null;l.BLOCKED_KEYDOWN_CODES=v;var a={minus:"-",plus:"+",left:"&#x2190;",right:"&#x2192;",down:"&#x2193;",up:"&#x2191;"};e.isMac()&&e.extend(a,{meta:"&#x2318;",shift:"&#x21E7;",alt:"&#x2325;",ctrl:"&#x2303;",enter:"&#x23CE;","delete":"&#x2326;",escape:"&#x238B;"});return{keyboardCodeFromEvent:E,mouseCodeFromEvent:function(b){return b?
b.which+z(b):0},modifiersFromEvent:z,keyboardCodeFromString:m,KeyboardManager:l,ActionRegistry:function(){function b(u,x,f,k){var o={},y=true;if(u&&typeof u.update==="function")try{y=u.update(f,k,o)}catch(q){e.warn(q);y=false}u=y;var t;f=0;for(k=n.length;f<k;f++)(t=n[f])&&t.observable&&t.event&&t.observable.fireEvent(t.event,x,u,o);return y?o:null}function d(u,x,f){var k=h[u];if(!k||typeof k.perform!=="function")f=false;else{u=b(k,u,x,f);f=!!u&&k.perform(x,f,u)}if(f===true||x&&x.consumed===true){if(x){x.consumed=
true;x.stopPropagation();x.stopImmediatePropagation();x.preventDefault()}return false}return f===false?true:f}var h={},n=[];e.extend(this,{register:function(u,x){e.assert(typeof u==="string");e.assert(typeof x==="function"||typeof x==="object");e.assert(!h[u],u);if(typeof x==="function")x={perform:x};typeof x.subscribe==="function"&&x.subscribe({update:e.curry(b,x,u)});h[u]=x;b(x,u)},action:d,listen:function(u,x,f,k,o){if(!x)return this;f&&x.addListener(u,f,function(q,t,C){t&&t.consumed===true||d(q,
t,C)});k&&x.addListener(u,k,function(q,t,C){var H=h[q];H&&b(H,q,t,C)});if(o){n.push({observable:x,event:o});var y=n.length-1;u.addDetach(function(){n[y]=null})}return this}})},installKeyMap:function(b,d,h,n){function u(f,k){return n.action(f,k)}for(var x in d)if(d.hasOwnProperty(x)){b=d[x];typeof x==="string"&&typeof b==="string"&&x&&b&&h.addShortcut(x,e.curry(u,b))}},formatShortcut:function(b){if(!b||typeof b!=="string")return b;b=b.split(",");for(var d=0,h=b[0];h;h=b[++d]){h=h.split("+");for(var n=
0,u=h[n];u;u=h[++n])if(u.length){var x=a[u];x||(x=u.length>1?u.substring(0,1).toUpperCase()+u.substring(1):u.toUpperCase());h[n]=x}b[d]=h.join(e.isMac()?"":"+")}return b.join("")},codeMapFromKeyMap:function(b){var d={};if(b)for(var h in b)if(b.hasOwnProperty(h))d[m(h)]=b[h];return d}}},la=function(){function z(){if(m)return m;m={};var r=namespace("almworks.i18n"),j=r["default"];j&&e.extend(m,j);j=e.keysOf(r);j.sort();for(var v=0,a=j[v];a;a=j[++v])a!=="default"&&e.extend(m,r[a]);return m}function E(r,
j){if(!s||!r)return r;var v=s[j];if(v===K||v===null)return r;return typeof v==="string"?v:""+v}var m=null,l=/\{(\d+)\}/g,s=null;return{bundle:z,resources:function(r,j){if(typeof r!=="string"||typeof j!=="object")e.error("bad resource spec "+r);else{if(r==="")r="default";var v=namespace("almworks.i18n");v=v[r]||(v[r]={});for(var a in j)if(j.hasOwnProperty(a)){var b=j[a];if(typeof b==="string")v[a]=b}m=null}},text:function(r){if(!r)return"";var j=z()[r];if(typeof j!=="string")j=r;else if(arguments.length>
1){s=e.addAll([],arguments,1);try{j=j.replace(l,E)}finally{s=null}}return j}}};(function(){for(var z=[da,aa,Z,ba,ca,fa,ga,ha,ia,ea,ja,ka,la],E=0,m;m=z[E++];){m=m();for(var l in m)if(m.hasOwnProperty(l))e[l]=m[l]}})()}catch(ma){alert("failed to initialize package jsutil "+ma)}})(window,document);

